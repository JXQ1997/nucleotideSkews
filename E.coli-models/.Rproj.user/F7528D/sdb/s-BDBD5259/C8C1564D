{
    "contents" : "# load the necessary functions\n## -- by Martin Lercher; June 2014 --\nrm(list=ls());\n## -- \nlibrary(sybil)\nlibrary(glpkAPI)\n\n######################################################################################################\n#\n# Questions:\n#\n#   Ratio of nucleotide investment / amino acid investment (in biomass)\n#   % of energy used for nucleotide production relativ to total cellular investment\n#   % of energy used for amino acid production relativ to total cellular investment\n#   ATP required for each nucleotide\n#   variance of energy investment into nucleotides\n#   variance of energy investment into amino acids\n#\n######################################################################################################\n\n######################################################################################################\n# The modified E. coli model\n######################################################################################################\n\n# load E. coli model\nm <- readTSVmod(prefix=\"iJO1366\", quoteChar = \"\\\"\")\n# remove the requirement to produce maintenance ATP:\nm <- changeBounds(m, \"ATPM\", lb=0)\n\n# What's the environment?\nex <- findExchReact(m)\n# set glucose uptake limit to 1.0:\nm <- changeBounds(m, ex[\"EX_glc(e)\"], lb = -1)\n\nupt <- uptReact(ex)\nex[upt]\nreact_name(m)[76] # check if cobalamin can be used as energy source; if yes switch it off\n\n## !!! remove oxygen from the environment? !!! \n## -- uncomment the following line if you prefer anaerobic enviroment --\n## m <- changeBounds(m, ex[\"EX_o2(e)\"], lb = 0)  # \n\n# biomass reaction:\nshrinkMatrix(m, j=\"Ec_biomass_iJO1366_core_53p95M\")\n\n######################################################################################################\n# Energy production \n######################################################################################################\n\n# how much ADP -> ATP can E. coli produce from the glucose?\nm2 <- addReact(m, \"burnATP\", c(\"atp[c]\", \"h2o[c]\", \"adp[c]\", \"pi[c]\", \"h[c]\"), c(-1, -1, 1, 1, 1))   # same as ATPM\nm2 <- changeObjFunc(m2, react = \"burnATP\")  \noptimizeProb(m2)  # 23.500\n# alternatively:\n# m3 <- changeObjFunc(m, react = \"ATPM\")  \n# optimizeProb(m3)\n\n# how much GDP -> GTP can E. coli produce from the glucose? The same as ATP, of course!\nm3 <- addReact(m, \"burnGTP\", c(\"gtp[c]\", \"h2o[c]\", \"gdp[c]\", \"pi[c]\", \"h[c]\"), c(-1, -1, 1, 1, 1))   # similar to ATPM\nm3 <- changeObjFunc(m3, react = \"burnGTP\")  \noptimizeProb(m3) # 23.500\n\n# how much of ATP de novo synthesis is possible?\nm4 <- addReact(m, \"atp_tr\", c(\"atp[c]\", \"atp[e]\"), c(-1, 1))   # transport reaction to extracellular\nm4 <- addReact(m4, \"EX_atp(e)\", \"atp[e]\", -1)   # exchange reaction extracellular -> NIL\nm4 <- changeObjFunc(m4, react = \"EX_atp(e)\")\noptimizeProb(m4)  # 0.530\n\n######################################################################################################\n# Nucleotide production\n######################################################################################################\n# Exchange reactions for nucleotides:\n# \"EX_thym(e)\", A: \"EX_ade(e)\", C: \"EX_csn(e)\", U: \"EX_ura(e)\", G: \"EX_gua(e)\"\n\n# minimize the amount of glucose taken up:\nm <- changeBounds(m, ex[\"EX_glc(e)\"], lb = -1000)    # allow unlimited uptake of glucose\nmg <- changeObjFunc(m, react = \"EX_glc(e)\", obj_coef = 1)   # but minimize this uptake (given what needs to be produced)\nglc.per.mol <- c()  # use this to store the results\n\n# how much of glucose is needed per Guanine (gua) de novo synthesis?\n# Guanine exchange: EX_gua(e)\nm.nt <- addReact(mg, \"gua_tr\", c(\"gua[c]\", \"gua[e]\"), c(-1, 1))   # transport reaction to extracellular\nm.nt <- changeBounds(m.nt, \"EX_gua(e)\", lb=1) # require at least 1 mol of this nucleotide to be produced\no5 <- optimizeProb(m.nt)\nglc.per.mol$G <- -lp_obj(o5)\n\n# how much of glucose is needed per Adenine (ade) de novo synthesis?\n# Adenine exchange: EX_ade(e)\nm.nt <- addReact(mg, \"ala_tr\", c(\"ade[c]\", \"ade[e]\"), c(-1, 1))   # transport reaction to extracellular\nm.nt <- changeBounds(m.nt, \"EX_ade(e)\", lb=1) # require at least 1 mol of this nucleotide to be produced\no5 <- optimizeProb(m.nt)\nglc.per.mol$A <- -lp_obj(o5)\n\n# how much of glucose is needed per Thymine (thym) de novo synthesis?\n# Adenine exchange: EX_thym(e)\nm.nt <- addReact(mg, \"thym_tr\", c(\"thym[c]\", \"thym[e]\"), c(-1, 1))   # transport reaction to extracellular\nm.nt <- changeBounds(m.nt, \"EX_thym(e)\", lb=1) # require at least 1 mol of this nucleotide to be produced\no5 <- optimizeProb(m.nt)\nglc.per.mol$T <- -lp_obj(o5)\n\n# how much of glucose is needed per Uracil (ura) de novo synthesis?\n# Adenine exchange: EX_ura(e)\nm.nt <- addReact(mg, \"ura_tr\", c(\"ura[c]\", \"ura[e]\"), c(-1, 1))   # transport reaction to extracellular\nm.nt <- changeBounds(m.nt, \"EX_ura(e)\", lb=1) # require at least 1 mol of this nucleotide to be produced\no5 <- optimizeProb(m.nt)\nglc.per.mol$U <- -lp_obj(o5)\n\n# how much of glucose is needed per Cytosine (csn) de novo synthesis?\n# Adenine exchange: EX_ura(e)\nm.nt <- addReact(mg, \"csn_tr\", c(\"csn[c]\", \"csn[e]\"), c(-1, 1))   # transport reaction to extracellular\nm.nt <- changeBounds(m.nt, \"EX_csn(e)\", lb=1) # require at least 1 mol of this nucleotide to be produced\no5 <- optimizeProb(m.nt)\nglc.per.mol$C <- -lp_obj(o5)\n\nglc.per.mol\n# The amount of glucose needed to make one molecule of each nucleotide (this includes both carbon and energy!):\n# G 0.8665298; A 0.899384; T 0.8971963; U 0.5700935; C 0.6714579\n# => U < C < G < T ~ A; A+U < G+C\n\n",
    "created" : 1401902054663.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "7028752",
    "id" : "C8C1564D",
    "lastKnownWriteTime" : 1401953184,
    "path" : "~/Dropbox/Rscripts/Rprojects/E.coli-models/NtAtp01.R",
    "project_path" : "NtAtp01.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}